<!DOCTYPE html>
<html>
<head>
	<title>Closeness Experiment</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		body {
			font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
			background-color: #f7f7f7;
			margin: 0;
			padding: 0;
		}

		h1, h2 {
			font-weight: bold;
			text-align: center;
			margin-top: 2rem;
			margin-bottom: 1rem;
		}

		p {
			margin: 1rem 0;
			line-height: 1.5;
			text-align: justify;
			padding: 0 1rem;
		}

		button {
			font-size: 1.2rem;
			font-weight: bold;
			color: #fff;
			background-color: #007bff;
			border: none;
			border-radius: 5px;
			padding: 1rem 2rem;
			cursor: pointer;
			display: block;
			margin: 2rem auto;
		}

		button:hover {
			background-color: #0069d9;
		}

		#game {
			max-width: 600px;
			text-align: center;
			margin: 0 auto;
			padding: 1rem;
		}

		#question {
			font-size: 1.5rem;
			font-weight: bold;
			margin-top: 2rem;
			margin-bottom: 1rem;
		}

		input[type="text"] {
			font-size: 1.2rem;
			padding: 1rem;
			border-radius: 5px;
			border: 1px solid #ccc;
			margin-top: 1rem;
			width: 80%;
		}

		input[type="text"]:focus {
			outline: none;
			border-color: #007bff;
		}

		#status {
			color: red;
			font-style: italic;
			margin-top: 1rem;
			margin-bottom: 2rem;
		}

		@media screen and (max-width: 600px) {
			h1 {
				font-size: 2.5rem;
			}
			h2 {
				font-size: 1.5rem;
			}
			p {
				font-size: 1rem;
			}
			button {
				font-size: 1rem;
			}
			input[type="text"] {
				font-size: 1rem;
			}
		}

	</style>
</head>
<body>
	<div id="instructions">
		<h1>Closeness Experiment</h1>
		<p>Welcome to the gamified version of the closeness experiment made by Arthur Aron. The purpose of this experiment is to see how close two people can become by asking each other a set of increasingly personal questions. You will be randomly paired with another participant and take turns answering the questions.</p>
		<button onclick="startGame()">Start Game</button>
	</div>

	<div id="game" style="display:none;">
		<h2>Question</h2>
		<p id="question"></p>
		<p id="status"></p>
	</div>
	<div id="countdown"></div>

	<script>
		// define the questions
		var questions = [
			"What is your favorite movie?",
			"What is your biggest fear?",
			"What is the most embarrassing thing that has ever happened to you?",
			"What is your biggest accomplishment?",
			"What is your idea of a perfect day?",
			"What is the most important thing in your life?",
			"What is something you've always wanted to do but haven't had the chance to?",
			"What is your favorite childhood memory?",
			"What is your biggest regret?",
			"What is your idea of a perfect relationship?"
		];

		var gameIndex = -1;
		var numQuestions = questions.length;
		var participantId = Math.floor(Math.random() * 1000); // generate random participant ID
		var minutes = -1;
		var timeLeft = 60; // the intervals are of 15 seconds, so 15 minutes will be 60

		

		function startGame() {
			document.getElementById("game").style.display = "block"; // show the game
			document.getElementById("question").innerHTML = questions[gameIndex]; // display the first question
			document.getElementById("status").innerHTML = "Participant ID: " + participantId; // display the participant ID
			gameIndex++; // increment game index to zero
			minutes = timeLeft;
			ClockCheck(); // start the clock
			document.getElementById("instructions").innerHTML = ""; // end game

		}
		
		document.addEventListener("click", nextQuestion);

		function nextQuestion() {
			
				if (gameIndex >= 0) {
					gameIndex++; // increment game index
					if (gameIndex === numQuestions) { // check if all questions have been asked
						document.getElementById("game").innerHTML = "<h2>Game Over</h2><p>Thank you for participating in the closeness experiment.</p>"; // end game
				clearInterval(timer);
					} else {
						document.getElementById("question").innerHTML = questions[gameIndex]; // display the next question
						document.getElementById("status").innerHTML = ""; // clear the status message
					}
				}
			
		}
		
		
		// TIMER
		
		var countdown = document.getElementById("countdown");

		function ClockCheck() { 
			if (minutes >= 0) {
				minutes = Math.floor(timeLeft / 4) - 1;
				countdown.innerHTML = minutes + "m ";

				if (timeLeft <= 0) {
					clearInterval(timer);
					document.body.classList.add("time-up");
					countdown.innerHTML = "Time is up!";
				}
				timeLeft--;
			}
		}
		var timer = setInterval(ClockCheck, 15000); // the intervals are of 15 seconds
		
	</script>
</body>
</html>
